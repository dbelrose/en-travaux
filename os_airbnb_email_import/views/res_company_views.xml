<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        <!-- Extension formulaire res.company -->
        <record id="view_company_form_airbnb_email" model="ir.ui.view">
            <field name="name">res.company.form.airbnb.email</field>
            <field name="model">res.company</field>
            <field name="inherit_id" ref="base.view_company_form"/>
            <field name="arch" type="xml">
                <!-- Ajout onglet Configuration Email Airbnb -->
                <xpath expr="//notebook" position="inside">
                    <page string="üìß Email Airbnb" name="airbnb_email">
                        <group>
                            <group string="Connexion IMAP">
                                <field name="airbnb_imap_host" placeholder="mail.belroseplace.site"/>
                                <field name="airbnb_imap_port"/>
                                <field name="airbnb_imap_ssl"/>
                                <field name="airbnb_imap_folder"/>
                                <field name="airbnb_sender_emails" placeholder="automated@airbnb.com,votreadresse@gmail.com"/>
                            </group>
                            <group string="Authentification">
                                <field name="airbnb_imap_user" placeholder="contact@belroseplace.site"/>
                                <field name="airbnb_imap_password" password="True"/>
                            </group>
                        </group>

                        <group>
                            <group string="Options">
                                <field name="airbnb_auto_process"/>
                                <field name="airbnb_last_fetch" readonly="1"/>
                            </group>
                            <group string="Actions">
                                <button name="action_test_imap_connection"
                                        string="üîß Tester la connexion"
                                        type="object"
                                        class="btn-secondary"/>
                                <button name="action_fetch_airbnb_emails"
                                        string="üìß R√©cup√©rer les emails maintenant"
                                        type="object"
                                        class="btn-primary"
                                        invisible="airbnb_auto_process == False"/>
                            </group>
                        </group>

                        <group string="‚ÑπÔ∏è Aide">
                            <div class="alert alert-info" role="alert">
                                <h4>Configuration Email Airbnb</h4>
                                <p>
                                    Ce module r√©cup√®re automatiquement les emails Airbnb depuis votre compte email
                                    et cr√©e les r√©servations automatiquement.
                                </p>
                                <ul>
                                    <li><strong>Serveur IMAP</strong> : Adresse du serveur email (ex: mail.belroseplace.site)</li>
                                    <li><strong>Port</strong> : 993 pour SSL/TLS (recommand√©), 143 pour non-s√©curis√©</li>
                                    <li><strong>Utilisateur</strong> : Adresse email compl√®te</li>
                                    <li><strong>Dossier</strong> : INBOX par d√©faut</li>
                                    <li><strong>Adresses exp√©diteurs</strong> : automated@airbnb.com ou vos adresses de transfert s√©par√©es par des virgules</li>
                                    <li><strong>Traitement automatique</strong> : Les emails sont v√©rifi√©s toutes les 15 minutes</li>
                                </ul>
                                <p class="text-muted">
                                    <strong>S√©curit√©</strong> : Le mot de passe est chiffr√© dans la base de donn√©es.
                                </p>
                                <p class="text-muted">
                                    <strong>Emails transf√©r√©s</strong> : Si vous transf√©rez les emails Airbnb depuis une autre adresse (ex: Gmail),
                                    ajoutez cette adresse dans "Adresses exp√©diteurs" : automated@airbnb.com,votreadresse@gmail.com
                                </p>
                            </div>
                        </group>
                    </page>
                </xpath>
            </field>
        </record>
    </data>
</odoo>
