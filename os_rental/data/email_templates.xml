<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="email_template_payment_link" model="mail.template">
        <field name="name">Lien de paiement - Réservation</field>
        <field name="model_id" ref="model_booking_reservation"/>
        <field name="subject">Confirmation de votre réservation ${object.name}</field>
        <field name="email_from">${object.company_id.email or ''}</field>
        <field name="email_to">${object.partner_id.email}</field>
        <field name="body_html" type="html">
            <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
                <h2 style="color: #333;">Bonjour ${object.partner_id.name},</h2>

                <p>Merci d'avoir réservé avec nous !</p>

                <div style="background-color: #f5f5f5; padding: 20px; margin: 20px 0; border-radius: 5px;">
                    <h3 style="margin-top: 0;">Détails de votre réservation</h3>
                    <p><strong>Référence:</strong> ${object.name}</p>
                    <p><strong>Logement:</strong> ${object.product_id.name}</p>
                    <p><strong>Arrivée:</strong> ${format_date(object.start_date)}</p>
                    <p><strong>Départ:</strong> ${format_date(object.end_date)}</p>
                    <p><strong>Nombre de nuits:</strong> ${object.nights}</p>
                    <p><strong>Montant total:</strong> ${object.total_amount} €</p>
                </div>

                <div style="text-align: center; margin: 30px 0;">
                    <a href="${object.billetweb_payment_url}"
                       style="background-color: #007bff; color: white; padding: 15px 30px; text-decoration: none; border-radius: 5px; display: inline-block; font-weight: bold;">
                        Procéder au paiement
                    </a>
                </div>

                <p style="color: #666; font-size: 12px;">
                    Pour toute question, n'hésitez pas à nous contacter.<br/>
                    <a href="${object.env['booking.config'].get_config().cgv_url}">Consultez nos CGV</a>
                </p>
            </div>
        </field>
    </record>
</odoo>
